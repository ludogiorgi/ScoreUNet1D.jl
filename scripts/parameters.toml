# Configuration for ScoreUNet1D.jl

[data]
# Path to the HDF5 dataset file
path = "data/new_ks.hdf5"

# Key in the HDF5 file containing the dataset
dataset_key = "timeseries"

# Orientation of samples in the dataset ("columns" or "rows")
samples_orientation = "columns"

# Number of samples to use for training
train_samples = 100000

# Seed for random subset selection
subset_seed = 2025

# Time step of the data
dt = 1.0

# Stride for sampling the data
stride = 1

[model]
# Number of input channels
in_channels = 1

# Base number of channels for the U-Net
base_channels = 64

# Multipliers for channels at each level of the U-Net
channel_multipliers = [1, 2, 4]

# Convolution kernel size
kernel_size = 5

# Whether to use periodic boundary conditions
periodic = true

# Activation function to use
activation = "swish"

# Final activation function
final_activation = "identity"

# Seed for model initialization
init_seed = 314159

[training]
# Batch size for training
batch_size = 128

# Number of training epochs
epochs = 50

# Force retraining even if a trained model exists
force_retrain = true

# Learning rate
lr = 0.001

# Noise level (sigma) for score matching
sigma = 0.1

# Whether to shuffle the dataset
shuffle = true

# Show progress bar during training
progress = true

# Seed for training randomness
seed = 42

# Interval (in epochs) to run Langevin dynamics evaluation
langevin_eval_interval = 50

# Number of gradient accumulation steps
accumulation_steps = 1

# Whether to use a learning rate schedule
use_lr_schedule = true

# Number of warmup steps for the scheduler
warmup_steps = 100

# Minimum learning rate factor for the scheduler
min_lr_factor = 0.1

[run]
# Enable verbose output
verbose = true

# Device to run training and Stein estimation on ("CPU" or "GPU" or "GPU:0" for single GPU)
device = "GPU:0"

# Device to use for Langevin integration.
# If empty, the value from `device` above is used.
# Accepted forms are the same as for `device`, e.g. "CPU", "GPU", "GPU:0", "GPU:0,1".
langevin_device = "GPU:0"

[langevin]
# Time step for Langevin dynamics sampling
sample_dt = 0.0025

# Number of steps for Langevin dynamics
nsteps = 400_000

# Resolution for spatial discretization (if applicable)
resolution = 400

# Number of ensembles (samples) to generate
n_ensembles = 256

# Number of burn-in steps to discard
burn_in = 20_000

# Number of bins for histograms/PDFs
nbins = 384

# Seed for Langevin sampling
seed = 21

# Mode for evaluation ("all" or specific metrics)
mode = "all"

# Show progress bar during Langevin integration
progress = true

# Boundary for the domain
boundary = [-40.0, 40.0]

[output]
# Root directory for run outputs
run_root = "runs"

# Path to store the latest trained model
model_repository_path = "runs/latest_trained_model.bson"

# Filename for the model in the run directory
run_model_filename = "model.bson"

# Lag offsets for correlation analysis
lag_offsets = [1, 2, 3]
